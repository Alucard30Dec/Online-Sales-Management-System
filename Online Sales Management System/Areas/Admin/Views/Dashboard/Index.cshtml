@{
    ViewData["Title"] = "Dashboard";

    int admins = (int)(ViewBag.AdminsCount ?? 0);
    int products = (int)(ViewBag.ProductsCount ?? 0);
    int customers = (int)(ViewBag.CustomersCount ?? 0);
    int suppliers = (int)(ViewBag.SuppliersCount ?? 0);
    int employees = (int)(ViewBag.EmployeesCount ?? 0);
    int purchases = (int)(ViewBag.PurchasesCount ?? 0);
    int invoices = (int)(ViewBag.InvoicesCount ?? 0);
    int expenses = (int)(ViewBag.ExpensesCount ?? 0);
    int lowStock = (int)(ViewBag.LowStockCount ?? 0);

    decimal todaySales = (decimal)(ViewBag.TodaySales ?? 0m);
    decimal monthSales = (decimal)(ViewBag.MonthSales ?? 0m);
}

<link rel="stylesheet" href="~/css/dashboard.css" asp-append-version="true" />

<div class="container-fluid pt-3">
    <h5 class="mb-3 text-muted font-weight-bold">Overview Performance</h5>
    <div class="row mb-4">
        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="stat-label">Today Sales</p>
                            <h3 class="stat-value">@todaySales.ToString("N0")</h3>
                            <small class="text-muted" style="font-size: 0.7rem;">@DateTime.UtcNow.ToString("yyyy-MM-dd") (UTC)</small>
                        </div>
                        <div class="icon-circle theme-red">
                            <i class="fas fa-cash-register"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer-custom">
                    <a href="/Admin/Invoices">View Details <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="stat-label">Month Sales</p>
                            <h3 class="stat-value text-primary">@monthSales.ToString("N0")</h3>
                        </div>
                        <div class="icon-circle theme-blue">
                            <i class="fas fa-chart-line"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer-custom">
                    <a href="/Admin/Reports">View Reports <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="stat-label">Total Invoices</p>
                            <h3 class="stat-value">@invoices</h3>
                        </div>
                        <div class="icon-circle theme-teal">
                            <i class="fas fa-file-invoice-dollar"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer-custom">
                    <a href="/Admin/Invoices">Manage Invoices <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-start">
                        <div>
                            <p class="stat-label">Expenses</p>
                            <h3 class="stat-value text-danger">@expenses</h3>
                        </div>
                        <div class="icon-circle theme-red">
                            <i class="fas fa-receipt"></i>
                        </div>
                    </div>
                </div>
                <div class="card-footer-custom">
                    <a href="/Admin/Expenses">View Expenses <i class="fas fa-arrow-right ml-1"></i></a>
                </div>
            </div>
        </div>
    </div>

    <h5 class="mb-3 text-muted font-weight-bold">Operations</h5>
    <div class="row mb-4">
        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body d-flex align-items-center">
                    <div class="icon-circle theme-blue mr-3 mb-0">
                        <i class="fas fa-box"></i>
                    </div>
                    <div>
                        <h4 class="stat-value mb-0">@products</h4>
                        <span class="text-muted">Products</span>
                    </div>
                    <a href="/Admin/Products" class="stretched-link"></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body d-flex align-items-center">
                    <div class="icon-circle theme-green mr-3 mb-0">
                        <i class="fas fa-users"></i>
                    </div>
                    <div>
                        <h4 class="stat-value mb-0">@customers</h4>
                        <span class="text-muted">Customers</span>
                    </div>
                    <a href="/Admin/Customers" class="stretched-link"></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body d-flex align-items-center">
                    <div class="icon-circle theme-orange mr-3 mb-0">
                        <i class="fas fa-truck"></i>
                    </div>
                    <div>
                        <h4 class="stat-value mb-0">@suppliers</h4>
                        <span class="text-muted">Suppliers</span>
                    </div>
                    <a href="/Admin/Suppliers" class="stretched-link"></a>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-6 mb-3">
            <div class="dash-card">
                <div class="card-body d-flex align-items-center">
                    <div class="icon-circle theme-purple mr-3 mb-0">
                        <i class="fas fa-cart-plus"></i>
                    </div>
                    <div>
                        <h4 class="stat-value mb-0">@purchases</h4>
                        <span class="text-muted">Purchases</span>
                    </div>
                    <a href="/Admin/Purchases" class="stretched-link"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-12 col-lg-8 mb-4">
            <div class="dash-card h-100">
                <div class="card-body">
                    <h5 class="card-title mb-4"><i class="fas fa-bolt text-warning mr-2"></i>Quick Actions</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <a class="btn btn-primary btn-block p-3 shadow-sm text-left" href="/Admin/Invoices/Create">
                                <i class="fas fa-file-invoice-dollar mr-2"></i> Create New Invoice
                            </a>
                        </div>
                        <div class="col-md-6 mb-3">
                            <a class="btn btn-success btn-block p-3 shadow-sm text-left" href="/Admin/Purchases/Create">
                                <i class="fas fa-cart-plus mr-2"></i> New Purchase Order
                            </a>
                        </div>
                        <div class="col-md-6 mb-3">
                            <a class="btn btn-outline-secondary btn-block text-left" href="/Admin/Admins">
                                <i class="fas fa-user-shield mr-2"></i> Manage Admins
                            </a>
                        </div>
                        <div class="col-md-6 mb-3">
                            <a class="btn btn-outline-secondary btn-block text-left" href="/Admin/AdminGroups">
                                <i class="fas fa-users-cog mr-2"></i> Admin Groups
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12 col-lg-4 mb-4">
            <div class="dash-card h-100" style="border-left: 5px solid #ffc107;">
                <div class="card-body text-center">
                    <div class="icon-circle theme-orange mx-auto mt-2">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h5 class="font-weight-bold mt-3">Low Stock Alert</h5>
                    <p class="text-muted">Products needing reorder</p>

                    <h1 class="display-4 font-weight-bold text-warning">@lowStock</h1>

                    <a href="/Admin/Stock/Low" class="btn btn-warning rounded-pill px-4 mt-3 shadow-sm">
                        <i class="fas fa-warehouse mr-2"></i> View Inventory
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/dashboard.js" asp-append-version="true"></script>
}