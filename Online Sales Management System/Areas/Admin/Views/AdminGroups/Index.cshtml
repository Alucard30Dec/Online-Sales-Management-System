@model List<OnlineSalesManagementSystem.Domain.Entities.AdminGroup>
@{
    ViewData["Title"] = "Roles / Groups";
    string q = ViewBag.Query as string ?? "";
}

<div class="card">
    <div class="card-header">
        <h3 class="card-title"><i class="fas fa-users-cog mr-1"></i> Roles / Groups</h3>
        <div class="card-tools">
            <a class="btn btn-sm btn-primary" href="/Admin/AdminGroups/Create"><i class="fas fa-plus mr-1"></i> New Group</a>
        </div>
    </div>

    <div class="card-body">
        <form method="get" class="mb-3">
            <div class="input-group" style="max-width: 520px;">
                <input type="text" class="form-control" name="q" value="@q" placeholder="Search group name..." />
                <div class="input-group-append">
                    <button class="btn btn-outline-secondary" type="submit"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </form>

        <div class="table-responsive">
            <table class="table table-bordered table-hover">
                <thead class="thead-light">
                    <tr>
                        <th style="width:90px;">#</th>
                        <th>Name</th>
                        <th>Description</th>
                        <th style="width:260px;" class="text-right">Actions</th>
                    </tr>
                </thead>
                <tbody>
                @if (Model.Count == 0)
                {
                    <tr><td colspan="4" class="text-center text-muted py-4">No groups found.</td></tr>
                }
                else
                {
                    foreach (var g in Model)
                    {
                        <tr>
                            <td>@g.Id</td>
                            <td class="font-weight-bold">@g.Name</td>
                            <td class="text-muted">@g.Description</td>
                            <td class="text-right">
                                <a class="btn btn-sm btn-outline-secondary" href="/Admin/AdminGroups/Permissions/@g.Id"><i class="fas fa-th-large mr-1"></i> Permissions</a>
                                <a class="btn btn-sm btn-outline-primary" href="/Admin/AdminGroups/Edit/@g.Id"><i class="fas fa-edit"></i></a>
                                <form method="post" action="/Admin/AdminGroups/Delete/@g.Id" class="d-inline" onsubmit="return confirm('Delete this group?');">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                                </form>
                            </td>
                        </tr>
                    }
                }
                </tbody>
            </table>
        </div>

        <div class="alert alert-info mb-0">
            Tip: open <b>Permissions</b> to configure what each group can <b>Show / Create / Edit / Delete</b>.
        </div>
    </div>
</div>
